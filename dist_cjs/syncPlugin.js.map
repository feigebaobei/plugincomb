{"version":3,"file":"syncPlugin.js","sources":["../src/syncPlugin.js"],"sourcesContent":["import BasicPlugin from \"./basicPlugin\";\nimport Hooks from \"./hooks\";\nclass SyncPlugin extends BasicPlugin{\n    constructor() {\n        super()\n        // this._hook = new Hooks()\n        this._hookMap = new Map()\n    }\n    register(hookName, fn) {\n        // 是否存在指定hookName的钩子\n        // 若存在则在该钩子上注册方法。\n        // 否则创建新的钩子。为其添加方法\n        let hook = this.getHook(hookName)\n        if (hook) {\n            hook.register(fn)\n        } else {\n            hook = new Hooks()\n            hook.register(fn)\n            this._hookMap.set(hookName, hook)\n        }\n    }\n    // 是否存在指定hookName的钩子\n    hasRegistedHook(hookName) {\n        return this._hookMap.has(hookName)\n    }\n    // 得到所有已经注册的hook\n    // getRegistedHook(hookName) {\n    // 根据hookName得到hook\n    getHook(hookName) {\n        if (hookName) {\n            return this._hookMap.get(hookName)\n        } else {\n            return null\n        }\n        return Array.from(this._hookMap.keys())\n    }\n\n    call(hookName, ...p) {\n        this._hookMap.get(hookName) // hook\n            .call(...p)\n    }\n    // 注销钩子\n    logoutHook(hookName) {\n        this._hookMap.delete(hookName)\n    }\n    // 注销钩子上的方法\n    logoutHookFn(hookName, fn) {\n        this._hookMap.get(hookName) // hook\n            .logout(fn)\n    }\n    // 先做成可以注销一个方法的\n    logout(hookName, fn) {\n        if (this._hookMap.has(hookName)) {\n            if (fn) {\n                this._hookMap.get(hookName).logout(fn)\n            } else {\n                this._hookMap.get(hookName).logout()\n            }\n        }\n    }\n}\nexport default SyncPlugin"],"names":["BasicPlugin","Hooks"],"mappings":";;;;;AAEA,MAAM,UAAU,SAASA,WAAW;AACpC,IAAI,WAAW,GAAG;AAClB,QAAQ,KAAK,GAAE;AACf;AACA,QAAQ,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,GAAE;AACjC,KAAK;AACL,IAAI,QAAQ,CAAC,QAAQ,EAAE,EAAE,EAAE;AAC3B;AACA;AACA;AACA,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAC;AACzC,QAAQ,IAAI,IAAI,EAAE;AAClB,YAAY,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAC;AAC7B,SAAS,MAAM;AACf,YAAY,IAAI,GAAG,IAAIC,KAAK,GAAE;AAC9B,YAAY,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAC;AAC7B,YAAY,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,EAAC;AAC7C,SAAS;AACT,KAAK;AACL;AACA,IAAI,eAAe,CAAC,QAAQ,EAAE;AAC9B,QAAQ,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC;AAC1C,KAAK;AACL;AACA;AACA;AACA,IAAI,OAAO,CAAC,QAAQ,EAAE;AACtB,QAAQ,IAAI,QAAQ,EAAE;AACtB,YAAY,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC;AAC9C,SAAS,MAAM;AACf,YAAY,OAAO,IAAI;AACvB,SAAS;AAET,KAAK;AACL;AACA,IAAI,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE;AACzB,QAAQ,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC;AACnC,aAAa,IAAI,CAAC,GAAG,CAAC,EAAC;AACvB,KAAK;AACL;AACA,IAAI,UAAU,CAAC,QAAQ,EAAE;AACzB,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAC;AACtC,KAAK;AACL;AACA,IAAI,YAAY,CAAC,QAAQ,EAAE,EAAE,EAAE;AAC/B,QAAQ,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC;AACnC,aAAa,MAAM,CAAC,EAAE,EAAC;AACvB,KAAK;AACL;AACA,IAAI,MAAM,CAAC,QAAQ,EAAE,EAAE,EAAE;AACzB,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;AACzC,YAAY,IAAI,EAAE,EAAE;AACpB,gBAAgB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,EAAE,EAAC;AACtD,aAAa,MAAM;AACnB,gBAAgB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,MAAM,GAAE;AACpD,aAAa;AACb,SAAS;AACT,KAAK;AACL;;;;"}